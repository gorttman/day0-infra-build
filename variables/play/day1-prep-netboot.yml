# FILE: variables/play/day1-prep-netboot.yml
---
# Variables for Day-1 Pi-5 NFS rootfs and kernel build.

# === Directories ===
staging_dir: /srv/build
staging_rootfs: "{{ staging_dir }}/rootfs"
staging_boot: "{{ staging_dir }}/boot"
boot_publish_path: /var/www/html/netboot/rpi5
NFS_EXPORT_PATH: /srv/nfs

# === Packages ===
base_os_release: bookworm
base_arch: arm64
kernel_pkg: linux-image-arm64
initramfs_pkg: initramfs-tools

# === File names ===
kernel_filename: vmlinuz
initrd_filename: initrd.img
ipxe_filename: boot.ipxe

# === Network/NFS parameters ===
NETBOOT_HTTP_IP: 192.168.1.10
NETBOOT_HTTP_PORT: 80
NFS_SERVER_IP: 192.168.1.10
default_hostname: pinode

# === NFS Server Configuration ===
# NFS export options for base rootfs (read-only shared root)
nfs_base_export_options: "rw,sync,no_subtree_check,no_root_squash"

# NFS export options for per-node directories (read-write per-node state)
nfs_node_export_options: "rw,sync,no_subtree_check,no_root_squash"

# Network to allow NFS access from (CIDR notation)
nfs_allowed_network: "192.168.1.0/24"

# List of node hostnames to create directories for
# Override this in your playbook vars to create directories for your actual nodes
nfs_node_hostnames:
  - pinode01
  - pinode02
  - pinode03
